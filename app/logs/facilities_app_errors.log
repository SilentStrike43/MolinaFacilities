2025-10-21 10:06:01 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: BuildError: Could not build url for endpoint 'send.index'. Did you mean 'send.export' instead?
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\core\auth.py", line 132, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\send\views.py", line 64, in page
    return render_template(
        "send/index.html",
    ...<6 lines>...
        package_prefix=PACKAGE_PREFIX,
    )
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\send\templates\send\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 433, in top-level template code
    <a href="{{ url_for('send.index') }}" class="nav-link-custom {{ 'active' if active=='send' else '' }}">
    ^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\BTManifest\venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'send.index'. Did you mean 'send.export' instead?
2025-10-21 10:06:08 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: BuildError: Could not build url for endpoint 'send.index'. Did you mean 'send.export' instead?
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\core\auth.py", line 132, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\send\views.py", line 64, in page
    return render_template(
        "send/index.html",
    ...<6 lines>...
        package_prefix=PACKAGE_PREFIX,
    )
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\send\templates\send\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 433, in top-level template code
    <a href="{{ url_for('send.index') }}" class="nav-link-custom {{ 'active' if active=='send' else '' }}">
    ^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\BTManifest\venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'send.index'. Did you mean 'send.export' instead?
2025-10-21 10:06:11 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: BuildError: Could not build url for endpoint 'send.index'. Did you mean 'send.export' instead?
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\core\auth.py", line 132, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\send\views.py", line 64, in page
    return render_template(
        "send/index.html",
    ...<6 lines>...
        package_prefix=PACKAGE_PREFIX,
    )
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\send\templates\send\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 433, in top-level template code
    <a href="{{ url_for('send.index') }}" class="nav-link-custom {{ 'active' if active=='send' else '' }}">
    ^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\BTManifest\venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'send.index'. Did you mean 'send.export' instead?
2025-10-21 10:08:12 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: BuildError: Could not build url for endpoint 'asset_ledger.ledger_home'. Did you mean 'inventory_ledger.ledger_home' instead?
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\core\auth.py", line 132, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\send\views.py", line 64, in page
    return render_template(
        "send/index.html",
    ...<6 lines>...
        package_prefix=PACKAGE_PREFIX,
    )
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\send\templates\send\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 473, in top-level template code
    <a href="{{ url_for('asset_ledger.ledger_home') }}" class="nav-link-custom {{ 'active' if active=='asset-ledger' else '' }}">
    ^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\BTManifest\venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'asset_ledger.ledger_home'. Did you mean 'inventory_ledger.ledger_home' instead?
2025-10-21 10:08:24 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: BuildError: Could not build url for endpoint 'asset_ledger.ledger_home'. Did you mean 'inventory_ledger.ledger_home' instead?
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\core\auth.py", line 132, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\send\views.py", line 64, in page
    return render_template(
        "send/index.html",
    ...<6 lines>...
        package_prefix=PACKAGE_PREFIX,
    )
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\send\templates\send\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 473, in top-level template code
    <a href="{{ url_for('asset_ledger.ledger_home') }}" class="nav-link-custom {{ 'active' if active=='asset-ledger' else '' }}">
    ^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\BTManifest\venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'asset_ledger.ledger_home'. Did you mean 'inventory_ledger.ledger_home' instead?
2025-10-21 10:13:15 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: BuildError: Could not build url for endpoint 'users.create_user'. Did you mean 'users.create' instead?
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\users\views.py", line 152, in user_list
    return render_template("users/list.html",
                           active="users", tab="list",
                           rows=filtered, q=q, show_all=include_inactive)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\users\templates\users\list.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 558, in top-level template code
    {% block body %}{% endblock %}
    ^^^^^^^^^^^^^
  File "C:\BTManifest\app\modules\users\templates\users\list.html", line 445, in block 'body'
    <a href="{{ url_for('users.create_user') if 'create_user' else '#' }}" class="btn-header-action">
    ^^^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\BTManifest\venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'users.create_user'. Did you mean 'users.create' instead?
2025-10-21 10:13:24 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: UndefinedError: 'sqlite3.Row object' has no attribute 'get'
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\core\auth.py", line 132, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\inventory\views.py", line 561, in insights
    return render_template("inventory/insights.html", active="insights", tab="inventory", rows=rows, **f)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\inventory\templates\inventory\insights.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 558, in top-level template code
    {% block body %}{% endblock %}
    ^^^^^^^^^^^^^
  File "C:\BTManifest\app\modules\inventory\templates\inventory\insights.html", line 345, in block 'body'
    <td>{{ r.manufacturer or r.get('manufacturer', '—') }}</td>
    ^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'sqlite3.Row object' has no attribute 'get'
2025-10-21 10:15:27 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: UndefinedError: 'sqlite3.Row object' has no attribute 'get'
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\core\auth.py", line 132, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\inventory\views.py", line 561, in insights
    return render_template("inventory/insights.html", active="insights", tab="inventory", rows=rows, **f)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\inventory\templates\inventory\insights.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 558, in top-level template code
    {% block body %}{% endblock %}
    ^^^^^^^^^^^^^
  File "C:\BTManifest\app\modules\inventory\templates\inventory\insights.html", line 345, in block 'body'
    <td>{{ r.manufacturer or r.get('manufacturer', '—') }}</td>
    ^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'sqlite3.Row object' has no attribute 'get'
2025-10-21 10:28:55 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: BuildError: Could not build url for endpoint 'users.create_user'. Did you mean 'users.create' instead?
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\users\views.py", line 152, in user_list
    return render_template("users/list.html",
                           active="users", tab="list",
                           rows=filtered, q=q, show_all=include_inactive)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\users\templates\users\list.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 562, in top-level template code
    {% block body %}{% endblock %}
    ^^^^^^^^^^^^^
  File "C:\BTManifest\app\modules\users\templates\users\list.html", line 445, in block 'body'
    <a href="{{ url_for('users.create_user') if 'create_user' else '#' }}" class="btn-header-action">
    ^^^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\BTManifest\venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'users.create_user'. Did you mean 'users.create' instead?
2025-10-21 10:28:59 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: UndefinedError: 'sqlite3.Row object' has no attribute 'get'
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\core\auth.py", line 132, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\inventory\views.py", line 561, in insights
    return render_template("inventory/insights.html", active="insights", tab="inventory", rows=rows, **f)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\inventory\templates\inventory\insights.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 562, in top-level template code
    {% block body %}{% endblock %}
    ^^^^^^^^^^^^^
  File "C:\BTManifest\app\modules\inventory\templates\inventory\insights.html", line 345, in block 'body'
    <td>{{ r.manufacturer or r.get('manufacturer', '—') }}</td>
    ^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'sqlite3.Row object' has no attribute 'get'
2025-10-21 10:37:14 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: UndefinedError: 'sqlite3.Row object' has no attribute 'get'
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\core\auth.py", line 132, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\inventory\views.py", line 561, in insights
    return render_template("inventory/insights.html", active="insights", tab="inventory", rows=rows, **f)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\inventory\templates\inventory\insights.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 562, in top-level template code
    {% block body %}{% endblock %}
    ^^^^^^^^^^^^^
  File "C:\BTManifest\app\modules\inventory\templates\inventory\insights.html", line 345, in block 'body'
    <td>{{ r.manufacturer or r.get('manufacturer', '—') }}</td>
    ^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'sqlite3.Row object' has no attribute 'get'
2025-10-21 10:37:19 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: BuildError: Could not build url for endpoint 'users.create_user'. Did you mean 'users.create' instead?
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\users\views.py", line 152, in user_list
    return render_template("users/list.html",
                           active="users", tab="list",
                           rows=filtered, q=q, show_all=include_inactive)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\users\templates\users\list.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 562, in top-level template code
    {% block body %}{% endblock %}
    ^^^^^^^^^^^^^
  File "C:\BTManifest\app\modules\users\templates\users\list.html", line 445, in block 'body'
    <a href="{{ url_for('users.create_user') if 'create_user' else '#' }}" class="btn-header-action">
    ^^^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\BTManifest\venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'users.create_user'. Did you mean 'users.create' instead?
2025-10-21 15:26:54 | [35mCRITICAL[0m | __main__ | create_app:114 | Failed to register blueprints: View function mapping is overwriting an existing endpoint function: inventory.insights
Traceback (most recent call last):
  File "C:\BTManifest\app\app.py", line 106, in create_app
    app.register_blueprint(inventory_bp)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\BTManifest\venv\Lib\site-packages\flask\sansio\app.py", line 595, in register_blueprint
    blueprint.register(self, options)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\sansio\blueprints.py", line 335, in register
    deferred(state)
    ~~~~~~~~^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\sansio\blueprints.py", line 434, in <lambda>
    lambda s: s.add_url_rule(
              ~~~~~~~~~~~~~~^
        rule,
        ^^^^^
    ...<3 lines>...
        **options,
        ^^^^^^^^^^
    )
    ^
  File "C:\BTManifest\venv\Lib\site-packages\flask\sansio\blueprints.py", line 110, in add_url_rule
    self.app.add_url_rule(
    ~~~~~~~~~~~~~~~~~~~~~^
        rule,
        ^^^^^
    ...<3 lines>...
        **options,
        ^^^^^^^^^^
    )
    ^
  File "C:\BTManifest\venv\Lib\site-packages\flask\sansio\scaffold.py", line 47, in wrapper_func
    return f(self, *args, **kwargs)
  File "C:\BTManifest\venv\Lib\site-packages\flask\sansio\app.py", line 657, in add_url_rule
    raise AssertionError(
    ...<2 lines>...
    )
AssertionError: View function mapping is overwriting an existing endpoint function: inventory.insights
2025-10-21 15:37:10 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: AttributeError: 'sqlite3.Row' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\modules\auth\views.py", line 68, in login
    first_name = user.get("first_name", "").strip()
                 ^^^^^^^^
AttributeError: 'sqlite3.Row' object has no attribute 'get'
2025-10-21 15:41:01 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: AttributeError: 'sqlite3.Row' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\modules\auth\views.py", line 68, in login
    first_name = user.get("first_name", "").strip()
                 ^^^^^^^^
AttributeError: 'sqlite3.Row' object has no attribute 'get'
2025-10-21 15:41:08 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: BuildError: Could not build url for endpoint 'admin.audit_log'. Did you mean 'admin.audit' instead?
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\core\auth.py", line 132, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\send\views.py", line 72, in page
    return render_template(
        "send/index.html",
    ...<6 lines>...
        package_prefix=PACKAGE_PREFIX,
    )
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\send\templates\send\index.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 545, in top-level template code
    <a href="{{ url_for('admin.audit_log') }}" class="nav-link-custom {{ 'active' if active=='admin' and page=='audit' else '' }}">
    ^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1121, in url_for
    return self.handle_url_build_error(error, endpoint, values)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 1110, in url_for
    rv = url_adapter.build(  # type: ignore[union-attr]
        endpoint,
    ...<3 lines>...
        force_external=_external,
    )
  File "C:\BTManifest\venv\Lib\site-packages\werkzeug\routing\map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'admin.audit_log'. Did you mean 'admin.audit' instead?
2025-10-21 15:43:59 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: UndefinedError: 'sqlite3.Row object' has no attribute 'get'
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\core\auth.py", line 132, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\inventory\views.py", line 482, in insights
    return render_template("inventory/insights.html", active="insights", tab="inventory", rows=rows, **f)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\inventory\templates\inventory\insights.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 601, in top-level template code
    {% block body %}{% endblock %}
    ^^^^^^^^^^^^^
  File "C:\BTManifest\app\modules\inventory\templates\inventory\insights.html", line 345, in block 'body'
    <td>{{ r.manufacturer or r.get('manufacturer', '—') }}</td>
    ^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'sqlite3.Row object' has no attribute 'get'
2025-10-21 15:46:55 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: UndefinedError: 'sqlite3.Row object' has no attribute 'get'
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\core\auth.py", line 141, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\core\auth.py", line 132, in wrapped
    return view(*a, **kw)
  File "C:\BTManifest\app\modules\inventory\views.py", line 482, in insights
    return render_template("inventory/insights.html", active="insights", tab="inventory", rows=rows, **f)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 150, in render_template
    return _render(app, template, context)
  File "C:\BTManifest\venv\Lib\site-packages\flask\templating.py", line 131, in _render
    rv = template.render(context)
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "C:\BTManifest\app\modules\inventory\templates\inventory\insights.html", line 1, in top-level template code
    {% extends "base.html" %}
  File "C:\BTManifest\app\templates\base.html", line 601, in top-level template code
    {% block body %}{% endblock %}
    ^^^^^^^^^^^^^
  File "C:\BTManifest\app\modules\inventory\templates\inventory\insights.html", line 345, in block 'body'
    <td>{{ r.manufacturer or r.get('manufacturer', '—') }}</td>
    ^^^^^
  File "C:\BTManifest\venv\Lib\site-packages\jinja2\utils.py", line 92, in from_obj
    if hasattr(obj, "jinja_pass_arg"):
       ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'sqlite3.Row object' has no attribute 'get'
2025-10-21 16:33:28 | [35mCRITICAL[0m | app.core.errors | handle_unexpected_error:157 | Unexpected error: AttributeError: 'sqlite3.Row' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\BTManifest\venv\Lib\site-packages\flask\app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "C:\BTManifest\app\modules\auth\views.py", line 71, in login
    first_name = user.get("first_name", "").strip()
                 ^^^^^^^^
AttributeError: 'sqlite3.Row' object has no attribute 'get'
